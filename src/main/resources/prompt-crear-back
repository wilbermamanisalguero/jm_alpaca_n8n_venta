Primero,Crear un api end point con java 21 y spring boot con las especificaciones de pom.xml

@RestController
@RequestMapping("/api/venta")
public class VentaController {
    @PostMapping("/registrar")

el parametro debe ser :

{
  "venta": {
    "nombreArchivo": null,
    "tipoVenta": null,
    "rucCliente": null,
	"cliente": null,
    "codigoFactura": null,
    "fechaDespacho": null,
    "rucVendedor": null,
	"vendedor": null,
    "facturaAnticipo": null,
    "tipoMoneda": null,
    "importeTotal": null,
    "observacion": null,
    "detalle": [
      {
        "producto": "",
        "tipoProducto": "",
        "peso": 0,
        "descuento": 0,
        "cantidad": 0,
        "unidadMedida": "",
        "valorUnitario": 0,
        "importeSubTotal": 0
      }
    ]
  }
} 


Segundo, La equivalencia con la base de datos:
 

{
  "venta": {
    "nombreArchivo": null ID_VENTA,  
    "tipoVenta": null TIPO_VENTA,  
	"fechaDespacho": null FECHA_DESPACHO,  
    "rucVendedor": null RUC_VENDEDOR,  
	"vendedor": null VENDEDOR,  
    "codigoFactura": null CODIGO_FACTURA, 	
    "rucCliente": null RUC_CLIENTE,
	"cliente": null CLIENTE,
    "facturaAnticipo": null FACTURA_ANTICIPO,
    "tipoMoneda": null TIPO_MONEDA,
    "importeTotal": null IMPORTE_TOTAL,
    "observacion": null OBSERVACION,
    "detalle": [
      {
        "producto": "" PRODUCTO,
        "tipoProducto": "" TIPO_PRODUCTO,
        "peso": 0 PESO,
        "descuento": 0 DESCUENTO,
        "cantidad": 0 CANTIDAD,
        "unidadMedida": "" UNIDAD_MEDIDA,
        "valorUnitario": 0 VALOR_UNITARIO,
        "importeSubTotal": 0 IMPORTE_SUBTOTAL
      }
    ]
  }
} 


Tercero, Tablas mysql:
USE jm_alpaca_venta;

-- =========================
-- TABLA: CLIENTE
-- =========================
CREATE TABLE CLIENTE (
    RUC_CLIENTE BIGINT NOT NULL,
    NOMBRE_CLIENTE VARCHAR(60) NOT NULL,
    CONSTRAINT PK_CLIENTE PRIMARY KEY (RUC_CLIENTE)
) ENGINE=InnoDB
DEFAULT CHARSET=utf8mb4
COLLATE=utf8mb4_spanish_ci;

-- =========================
-- TABLA: VENDEDOR
-- =========================
CREATE TABLE VENDEDOR (
    RUC_VENDEDOR BIGINT NOT NULL,
    NOMBRE_VENDEDOR VARCHAR(128) NOT NULL,
    CONSTRAINT PK_VENDEDOR PRIMARY KEY (RUC_VENDEDOR)
) ENGINE=InnoDB
DEFAULT CHARSET=utf8mb4
COLLATE=utf8mb4_spanish_ci;

-- =========================
-- TABLA: VENTA
-- =========================
CREATE TABLE VENTA (
    ID_VENTA VARCHAR(20) NOT NULL,
    TIPO_VENTA VARCHAR(30),
    FECHA_DESPACHO DATE,
    RUC_VENDEDOR BIGINT NOT NULL,
    VENDEDOR VARCHAR(120) NULL,
    CODIGO_FACTURA VARCHAR(30) NULL,
    RUC_CLIENTE BIGINT NOT NULL,
    CLIENTE VARCHAR(120) NULL,    
    FACTURA_ANTICIPO VARCHAR(30),
    TIPO_MONEDA VARCHAR(10),
    IMPORTE_TOTAL DECIMAL(12,2),
    OBSERVACION VARCHAR(500),
    
    CONSTRAINT PK_VENTA PRIMARY KEY (ID_VENTA),

    CONSTRAINT FK_VENTA_CLIENTE
        FOREIGN KEY (RUC_CLIENTE)
        REFERENCES CLIENTE (RUC_CLIENTE),

    CONSTRAINT FK_VENTA_VENDEDOR
        FOREIGN KEY (RUC_VENDEDOR)
        REFERENCES VENDEDOR (RUC_VENDEDOR)

) ENGINE=InnoDB
DEFAULT CHARSET=utf8mb4
COLLATE=utf8mb4_spanish_ci;

-- =========================
-- TABLA: VENTA_DETALLE
-- =========================
CREATE TABLE VENTA_DETALLE (
    ID_DETALLE INT AUTO_INCREMENT NOT NULL,
    ID_VENTA VARCHAR(20) NOT NULL,
    PRODUCTO VARCHAR(100) NOT NULL,
    TIPO_PRODUCTO VARCHAR(50),
    PESO DECIMAL(10,2),
    DESCUENTO DECIMAL(10,2),
    CANTIDAD INT NOT NULL,
    UNIDAD_MEDIDA VARCHAR(20),
    VALOR_UNITARIO DECIMAL(10,2),
    IMPORTE_SUBTOTAL DECIMAL(12,2),

    CONSTRAINT PK_VENTA_DETALLE PRIMARY KEY (ID_DETALLE),

    CONSTRAINT FK_DETALLE_VENTA
        FOREIGN KEY (ID_VENTA)
        REFERENCES VENTA (ID_VENTA)
        ON DELETE CASCADE

) ENGINE=InnoDB
DEFAULT CHARSET=utf8mb4
COLLATE=utf8mb4_spanish_ci;



Cuarto, Archivo properties : application.properties

spring.application.name=alpaca

# Server Configuration
server.port=8082

# MySQL Configuration
mysql.host=206.81.5.2
mysql.port=3307
mysql.database=jm_alpaca_venta
mysql.username=root
mysql.password=Admin#2025

# Connection Pool Configuration
mysql.pool.max-size=10
mysql.pool.max-wait-queue-size=100
mysql.connection.timeout=30000
mysql.idle.timeout=600000


Quinto, Archivo : pom.xml

<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>org.springframework.boot</groupId>
		<artifactId>spring-boot-starter-parent</artifactId>
		<version>4.0.0</version>
		<relativePath/> <!-- lookup parent from repository -->
	</parent>
	<groupId>com.pe.jm</groupId>
	<artifactId>alpaca</artifactId>
	<version>0.0.1-SNAPSHOT</version>
	<name>alpaca</name>
	<description>Demo project for Spring Boot</description>
	<url/>
	<licenses>
		<license/>
	</licenses>
	<developers>
		<developer/>
	</developers>
	<scm>
		<connection/>
		<developerConnection/>
		<tag/>
		<url/>
	</scm>
	<properties>
		<java.version>21</java.version>
		<vertx.version>4.5.1</vertx.version>
	</properties>
	<dependencies>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter</artifactId>
		</dependency>

		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-web</artifactId>
		</dependency>

		<!-- Vert.x Core -->
		<dependency>
			<groupId>io.vertx</groupId>
			<artifactId>vertx-core</artifactId>
			<version>${vertx.version}</version>
		</dependency>

		<!-- Vert.x MySQL Reactive Client -->
		<dependency>
			<groupId>io.vertx</groupId>
			<artifactId>vertx-mysql-client</artifactId>
			<version>${vertx.version}</version>
		</dependency>

		<!-- Vert.x SQL Client -->
		<dependency>
			<groupId>io.vertx</groupId>
			<artifactId>vertx-sql-client</artifactId>
			<version>${vertx.version}</version>
		</dependency>

		<!-- Lombok para reducir boilerplate -->
		<dependency>
			<groupId>org.projectlombok</groupId>
			<artifactId>lombok</artifactId>
			<optional>true</optional>
		</dependency>

		<!-- Jackson para JSON -->
		<dependency>
			<groupId>com.fasterxml.jackson.core</groupId>
			<artifactId>jackson-databind</artifactId>
		</dependency>

		<dependency>
			<groupId>com.fasterxml.jackson.datatype</groupId>
			<artifactId>jackson-datatype-jsr310</artifactId>
		</dependency>

		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-test</artifactId>
			<scope>test</scope>
		</dependency>
	</dependencies>

	<build>
		<plugins>
			<plugin>
				<groupId>org.springframework.boot</groupId>
				<artifactId>spring-boot-maven-plugin</artifactId>
			</plugin>
		</plugins>
	</build>

</project>





AÃ±adir una validacion que la suma de "importeSubTotal": 0 IMPORTE_SUBTOTAL debe ser igual a  "importeTotal": null IMPORTE_TOTAL sino devolver error 

{
  "venta": {
    "nombreArchivo": null ID_VENTA,  
    "tipoVenta": null TIPO_VENTA,  
	"fechaDespacho": null FECHA_DESPACHO,  
    "rucVendedor": null RUC_VENDEDOR,  
	"vendedor": null VENDEDOR,  
    "codigoFactura": null CODIGO_FACTURA, 	
    "rucCliente": null RUC_CLIENTE,
	"cliente": null CLIENTE,
    "facturaAnticipo": null FACTURA_ANTICIPO,
    "tipoMoneda": null TIPO_MONEDA,
    "importeTotal": null IMPORTE_TOTAL,
    "observacion": null OBSERVACION,
    "detalle": [
      {
        "producto": "" PRODUCTO,
        "tipoProducto": "" TIPO_PRODUCTO,
        "peso": 0 PESO,
        "descuento": 0 DESCUENTO,
        "cantidad": 0 CANTIDAD,
        "unidadMedida": "" UNIDAD_MEDIDA,
        "valorUnitario": 0 VALOR_UNITARIO,
        "importeSubTotal": 0 IMPORTE_SUBTOTAL
      }
    ]
  }
} 